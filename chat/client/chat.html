<html>
	<head>
		<link rel="stylesheet" type="text/css" href="style.css">

		</style>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">

		</script>
		<script>
			function getMessages(){
				$.getJSON("http://{IP_ADDRESS}:{PORT}/chat/messages",
					function(data) {
					
						$('#messages').empty()
						data.messages.forEach(function(data){
							$('#messages').append("<p>"+data+"</p>");
						})
					}
				);
			}
			function clear(){
				$('#send').val('')
				$('#send').focus()
			}				
			function send(text, id){
			console.log($('#user').val())
				$.ajax({
					url: 'http://{IP_ADDRESS}:{PORT}/chat/messages?send='+text+'&id='+id,
					type: 'POST',
					success: function(response) {
					},
					error: function (error){
						console.log(error)
					}
				});
			}			
			$(document).ready(function(){
				$('#button').click(function(){
					send($('#send').val(),$('#user').val());
					clear();
				});
				$('#send').keypress(function(e){
					if(e.which == 13) {
						send($('#send').val(),$('#user').val());
						clear();
					}
				});
				//this seems kinda wrong
         		window.setInterval(function(){
					getMessages();
				}, 750);
			});
		</script>
	</head>
	<body>
		<div id="messages"></div>
		<br/>
		<div id="panel">
			<input id="user" type="text"/>
			<input id="send" type="text"/>
			<input type="button" value="Send" id="MyButton" >
		</div>
</body>
</html>